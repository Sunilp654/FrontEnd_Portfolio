<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    body, html{
        height: 100%;
    }
    .timeCounter {
        text-transform: uppercase;
    }
    .DropdownArrow{
      position:absolute;
      right: 0;
      top:0;
    }
    .dropDownList {
  max-height: 200px;
  overflow-y: auto;
}
    .activeLi{
      color:red;
    }

    .dropDownList {
  max-height: 200px;
  overflow-y: auto;
  position: absolute;
  z-index: 1000;
  background: #fff;
  width: 100%;
  border: 1px solid #ccc;
  padding: 0;
  margin: 0;
  list-style: none;
}

.dropDownList li {
  padding: 8px 12px;
  cursor: pointer;
}

.dropDownList li:hover,
.dropDownList .activeLi {
  background-color: #007bff;
  color: #fff;
}

 input:focus-visible
 {
    outline: none;
}
  </style>
</head>
<body>

<div class="row m-0">
  <div class="col-md-3">
    <div class="customDropDown position-relative">
      <input type="text" id="startTime" value="12:00am" class="w-100"/>
      <ul class="dropDownList" style="visibility: hidden;" id="startTimeList">
    <li>12:00am</li>
    <li>12:15am</li>
    <li>12:30am</li>
    <li>12:45am</li>
    <li>1:00am</li>
    <li>1:15am</li>
    <li>1:30am</li>
    <li>1:45am</li>
    <li>2:00am</li>
    <li>2:15am</li>
    <li>2:30am</li>
    <li>2:45am</li>
    <li>3:00am</li>
    <li>3:15am</li>
    <li class="activeLi">3:30am</li>
    <li>3:45am</li>
    <li>4:00am</li>
    <li>4:15am</li>
    <li>4:30am</li>
    <li>4:45am</li>
    <li>5:00am</li>
    <li>5:15am</li>
    <li>5:30am</li>
    <li>5:45am</li>
    <li>6:00am</li>
    <li>6:15am</li>
    <li>6:30am</li>
    <li>6:45am</li>
    <li>7:00am</li>
    <li>7:15am</li>
    <li>7:30am</li>
    <li>7:45am</li>
    <li>8:00am</li>
    <li>8:15am</li>
    <li>8:30am</li>
    <li>8:45am</li>
    <li>9:00am</li>
    <li>9:15am</li>
    <li>9:30am</li>
    <li>9:45am</li>
    <li>10:00am</li>
    <li>10:15am</li>
    <li>10:30am</li>
    <li>10:45am</li>
    <li>11:00am</li>
    <li>11:15am</li>
    <li>11:30am</li>
    <li>11:45am</li>
    <li>12:00pm</li>
    <li>12:15pm</li>
    <li>12:30pm</li>
    <li>12:45pm</li>
    <li>1:00pm</li>
    <li>1:15pm</li>
    <li>1:30pm</li>
    <li>1:45pm</li>
    <li>2:00pm</li>
    <li>2:15pm</li>
    <li>2:30pm</li>
    <li>2:45pm</li>
    <li>3:00pm</li>
    <li>3:15pm</li>
    <li>3:30pm</li>
    <li>3:45pm</li>
    <li>4:00pm</li>
    <li>4:15pm</li>
    <li>4:30pm</li>
    <li>4:45pm</li>
    <li>5:00pm</li>
    <li>5:15pm</li>
    <li>5:30pm</li>
    <li>5:45pm</li>
    <li>6:00pm</li>
    <li>6:15pm</li>
    <li>6:30pm</li>
    <li>6:45pm</li>
    <li>7:00pm</li>
    <li>7:15pm</li>
    <li>7:30pm</li>
    <li>7:45pm</li>
    <li>8:00pm</li>
    <li>8:15pm</li>
    <li>8:30pm</li>
    <li>8:45pm</li>
    <li>9:00pm</li>
    <li>9:15pm</li>
    <li>9:30pm</li>
    <li>9:45pm</li>
    <li>10:00pm</li>
    <li>10:15pm</li>
    <li>10:30pm</li>
    <li>10:45pm</li>
    <li>11:00pm</li>
    <li>11:15pm</li>
    <li>11:30pm</li>
    <li>11:45pm</li>
</ul>
    </div>
  </div>
  <div class="col-md-3">
    <div class="customDropDown position-relative">
      <input type="text" id="EndTime" class="w-100" />
      <ul class="dropDownList" style="visibility: hidden;" id="endTimeList">
      </ul>
    </div>
  </div>
</div>
</div>
<script>
 const startTimeinput = document.getElementById('startTime');
  const dropdown = document.getElementById('startTimeList');
  const listItems = dropdown.querySelectorAll('li');
  let debounceTimer;
//regex 
 const regexChar = /^[A-Za-z]+$/;
const regex24hours = /^(2[5-9]|[3-9]\d|\d{3,})$/;
const regex60min = /^(6[0-9]|[7-9][0-9]|\d{3,})$/; 
const regexAMPMFormate = /^(1[0-2]|[1-9]):[0-5][0-9](am|pm)$/i;
const start3Letters = /^[A-Za-z]{3}$/;
const start5Letters = /^[A-Za-z]{4}$/;
const regexDigitLength = /^\d{4}$/;

  // Function to set active based on input value
  function setActiveFromInput() {
   // debugger
    const value = startTimeinput.value.trim().toLowerCase();

    listItems.forEach(li => {
     //  debugger
      if (li.innerHTML.trim().toLowerCase() === value) {
        li.classList.add('activeLi');
        // Scroll li to top of dropdown
        dropdown.scrollTop = li.offsetTop;
      } else {
        li.classList.remove('activeLi');
      }
    });
  }

  // On page load: set default active li
  window.addEventListener('DOMContentLoaded', () => {
    //debugger
    setActiveFromInput();
  });

  // Show dropdown on input focus
  startTimeinput.addEventListener('focusin', () => {
    dropdown.style.visibility = 'visible';
  });

  // Hide dropdown after blur (with delay for click)
  startTimeinput.addEventListener('focusout', () => {
    setTimeout(() => {
      dropdown.style.visibility = 'hidden';
    }, 150);
  });

  // Click on dropdown list item
  dropdown.addEventListener('click', function (e) {
    if (e.target.tagName === 'LI') {
      const clickedItem = e.target;
      startTimeinput.value = clickedItem.innerText;

      // Remove all active classes
      listItems.forEach(li => li.classList.remove('activeLi'));

      // Add active to selected item
      clickedItem.classList.add('activeLi');

      // Scroll clicked item to top
      dropdown.scrollTop = clickedItem.offsetTop;

      // Hide dropdown
      dropdown.style.visibility = 'hidden';
    }
  });

  startTimeinput.addEventListener("input", function () {
    clearTimeout(debounceTimer);
    
    debounceTimer = setTimeout(() => {
      // This function runs after typing stops for 500ms
      handleInputDone(startTimeinput.value);
    }, 800); // 500ms delay
  });

  function handleInputDone(value) {
    debugger
  var strFirstThree = value;
		if (strFirstThree.substring(0, 3).match(  ) || (strFirstThree.length <= 2 && strFirstThree > 24) || Number(startTimeinput.value) > 2460 || strFirstThree.length >= 8 || (Number(startTimeinput.value.slice(-2)) > 60 && startTimeinput.value.length >= 3)) {
			startTimeinput.style.border = "1px solid #FF0000";
		} else {
			startTimeinput.style.border = "1px solid";
			const inputValue = startTimeinput.value;
		}
  }
</script>
</body>
</html>
